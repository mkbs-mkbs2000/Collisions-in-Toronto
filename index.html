<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GGR472 Lab 4</title>
    <!--Mapbox API -->
    <script src='https://api.mapbox.com/mapbox-gl-js/v3.10.0/mapbox-gl.js'></script>
    <link href='https://api.mapbox.com/mapbox-gl-js/v3.10.0/mapbox-gl.css' rel='stylesheet' />
    <!--Mapbox Geocoder API-->
    <script src="https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-geocoder/v5.0.3/mapbox-gl-geocoder.min.js"></script>
    <link rel="stylesheet" href="https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-geocoder/v5.0.3/mapbox-gl-geocoder.css" type="text/css">
    <!--CSS -->
    <link rel="stylesheet" href="style.css">
    <!--Bootstrap CSS-->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <!--Turf.js -->
    <script src='https://unpkg.com/@turf/turf@7.2.0/turf.min.js'></script>
    <!--Simple Statistics.js-->
    <script src="https://unpkg.com/simple-statistics@7.8.8/dist/simple-statistics.min.js"></script>
</head>

<body>

    <!--Initial Welcome Message to inform viewers on how to see the map-->
    <div class="modal fade" id="welcomeModal" tabindex="-1">
        <div class="modal-dialog modal-dialog-centered modal-lg">
            <div class="modal-content">

                <div class="modal-header">
                    <h1 class="modal-title fs-5" id="modalTitle">
                        Welcome to the Toronto Traffic Accident Analysis Map
                    </h1>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                
                <div class="modal-body">
                    <p>
                        This is a visualisation of all traffic accidents involving pedestrians and/or cyclists in Toronto since 2006. The data is sourced from the City of Toronto's <a target="_blank" href="https://open.toronto.ca/dataset/motor-vehicle-collisions-involving-killed-or-seriously-injured-persons/">Open Data Portal</a>.<br><br> 
                        Hover over the hexagons on the map to find out the total, major injury and fatal accident counts.<br><br>
                        One can also toggle between the checkboxes on the top left corner to see the count spread of different types of accident across the City of Toronto.<br><br>
                        One can key in their address, and a marker will appear on the map to show the location of the address. The map will also zoom in to the location of the address. Thus, one can easily identify which hexagon is their area in and therefore the accident statistics near their area.<br><br>
                        For optimal viewing experience, please access using a desktop instead of mobile.
                    </p>
                </div>

            </div>
        </div>
    </div>

    <!-- MAP CONTAINER -->
    <div id="map-container">
        <!--the map itself-->
        <div id='map' class='map'></div>

        <div id="layer_selection">
            <div class="form-check">
                <input class="form-check-input" type="checkbox" value="" id="totalacc" checked>
                <label class="form-check-label">
                    Total Accidents
                </label>
            </div>

            <div class="form-check">
                <input class="form-check-input" type="checkbox" value="" id="majoracc">
                <label class="form-check-label">
                    Major Injury Accidents
                </label>
            </div>

            <div class="form-check">
                <input class="form-check-input" type="checkbox" value="" id="fatalacc">
                <label class="form-check-label">
                    Fatal Accidents
                </label>
            </div>
        </div>

        <!--Legend to reflect data classification of TOTAL accidents-->
        <div id="total" class="legend">
            <h6>Total Accident Count</h6>
            <div><span></span>1</div>
            <div><span></span>2 - 8</div>
            <div><span></span>9 - 26</div>
            <div><span></span>27 - 68</div>
            <div><span></span>No instances</div>
        </div>

        <!--Legend to reflect data classification of MAJOR accidents-->
        <div id="major" class="legend">
            <h6>Major Injury Accident Count</h6>
            <div><span></span>1</div>
            <div><span></span>2 - 7</div>
            <div><span></span>8 - 21</div>
            <div><span></span>22 - 52</div>
            <div><span></span>No instances</div>
        </div>

        <!--Legend to reflect data classification of FATAL accidents-->
        <div id="fatal" class="legend">
            <h6>Fatal Accident Count</h6>
            <div><span></span>1</div>
            <div><span></span>2</div>
            <div><span></span>3 - 4</div>
            <div><span></span>5 - 8</div>
            <div><span></span>No instances</div>
        </div>
    </div>

    <!--Bootstrap JS-->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.min.js" integrity="sha384-BBtl+eGJRgqQAUMxJ7pMwbEyER4l1g+O15P+16Ep7Q9Q+zqX6gSbd85u4mG4QzX+" crossorigin="anonymous"></script>
    <script src="script.js"></script>

</body>

</html>